(function(a){a.xml||(a.xml={});var h={init:function(b){return this.each(function(){var d=a(this);if(!d.data("xml")){var e={xml:"/xml/template.xml",async:!1,error:function(){}};b&&a.extend(e,b);var c=null;!1==e.async&&(c=a.xml.loadXml(e.xml));a(this).data("xml",{target:d,$xmlDoc:c,settings:e})}})},append:function(b,d){return this.each(function(){b||(b="home");var e=a(this),c=e.data("xml"),f=c.$xmlDoc;!0==c.settings.async&&(f=a.xml.loadXml(settings.xml));f=f.find("template#"+b).first();if(0==f.length){var g=
a.Event("error",{type:404});if(!c.settings.error.apply(c.target,[g]))return}if(g=f.attr("access"))if(g=a.Event("error",{type:403,access:g}),!c.settings.error.apply(c.target,[g]))return;c=f.clone().contents();c=a("<div/>").append(c);c.find("br").replaceWith("<br/>");e.append(c.html());d&&d.apply(e.target)})}};a.fn.xml=function(b){if(h[b])return h[b].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof b||!b)return h.init.apply(this,arguments);a.error("Method "+b+" does not exist on jQuery.xml")};
a.xml.loadXml=function(b){var d=null;a.ajax({url:b,dataType:a.browser.msie?"text":"xml",async:!1,success:function(b){d="string"==typeof b?a("<div/>").html(b).html():b},error:function(a){console.error(a.responseText)}});return $xmlDoc=a(d)}})(jQuery);
